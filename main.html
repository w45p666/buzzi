<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile Page</title>
<style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    .profile { padding: 20px; background: #fff; display: flex; align-items: center; gap: 20px; }
    .profile img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
    .profile-info { flex-grow: 1; }
    .profile-info h2 { margin: 0; }
    .profile-info p { margin: 5px 0; color: #555; }
    .counts { display: flex; gap: 15px; color: #777; font-size: 14px; }
    .new-post { padding: 20px; background: #fff; margin-top: 10px; }
    .new-post textarea { width: 100%; padding: 10px; font-size: 14px; }
    .feed { margin-top: 10px; }
    .post { background: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; }
    .post h3 { margin: 0 0 5px 0; display: flex; align-items: center; gap: 10px; }
    .post img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
    .post p { margin: 5px 0; }
    .post .actions { display: flex; gap: 10px; color: #555; font-size: 14px; cursor: pointer; }
</style>
</head>
<body>

<!-- Profile (Identity) -->
<div class="profile">
    <img id="profilePic" src="" alt="Profile Picture">
    <div class="profile-info">
        <h2 id="username"></h2>
        <p id="bio">This is a bio about the user.</p>
        <div class="counts">
            <span id="followers">Followers: 120</span>
            <span id="following">Following: 75</span>
        </div>
    </div>
</div>

<!-- Content (Expression) -->
<div class="new-post">
    <textarea id="postContent" placeholder="What's on your mind?"></textarea>
    <button onclick="createPost()">Post</button>
</div>

<!-- Feed (Discovery) -->
<div class="feed" id="feed">
    <!-- Posts will appear here -->
</div>

<script>
// Load user info from localStorage (from login page)
const username = localStorage.getItem('username') || 'Guest';
const profilePic = localStorage.getItem('profilePic') || 'https://via.placeholder.com/80';

document.getElementById('username').textContent = username;
document.getElementById('profilePic').src = profilePic;

// Load saved posts or initialize
let posts = JSON.parse(localStorage.getItem('posts')) || [];

// Functions
function createPost() {
    const content = document.getElementById('postContent').value.trim();
    if (!content) return alert('Post cannot be empty');

    const post = {
        username,
        profilePic,
        content,
        likes: 0,
        shares: 0,
        timestamp: new Date().toISOString()
    };

    posts.unshift(post); // newest first
    localStorage.setItem('posts', JSON.stringify(posts));
    document.getElementById('postContent').value = '';
    renderFeed();
}

function renderFeed() {
    const feed = document.getElementById('feed');
    feed.innerHTML = '';
    posts.forEach((post, index) => {
        const postDiv = document.createElement('div');
        postDiv.className = 'post';
        postDiv.innerHTML = `
            <h3><img src="${post.profilePic}" alt="pfp">${post.username}</h3>
            <p>${post.content}</p>
            <div class="actions">
                <span onclick="likePost(${index})">‚ù§Ô∏è ${post.likes}</span>
                <span onclick="sharePost(${index})">üîÅ ${post.shares}</span>
            </div>
        `;
        feed.appendChild(postDiv);
    });
}

function likePost(index) {
    posts[index].likes++;
    localStorage.setItem('posts', JSON.stringify(posts));
    renderFeed();
}

function sharePost(index) {
    posts[index].shares++;
    localStorage.setItem('posts', JSON.stringify(posts));
    renderFeed();
}

// Initial render
renderFeed();
</script>

</body>
</html>
